<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Study Advanced Analytics</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');

body{
margin:0;
font-family:'Inter',sans-serif;
background:#0a0a0a;
color:#f2f2f2;
}

header{
padding:25px 60px;
font-size:24px;
background:#111;
border-bottom:1px solid #222;
}

.container{padding:40px 60px;}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:25px;
}

.card{
background:rgba(255,255,255,0.05);
border:1px solid rgba(255,255,255,0.1);
padding:25px;
border-radius:18px;
transition:0.3s;
}

.card:hover{transform:translateY(-4px);}

.metric-title{color:#aaa;font-size:14px;}
.metric-value{font-size:30px;font-weight:600;margin-top:10px;}

select{
background:#111;
color:#fff;
border:1px solid #333;
padding:8px;
border-radius:8px;
margin-right:10px;
}

canvas{
margin-top:40px;
background:#111;
padding:20px;
border-radius:18px;
}

.summary{
margin-top:40px;
padding:25px;
background:#111;
border-radius:18px;
line-height:1.8;
}

</style>
</head>

<body>

<header>
AI-Based Study Tools | Advanced Business Analytics
</header>

<div class="container">

<div>
<select id="fieldFilter">
<option value="all">All Fields</option>
</select>

<select id="yearFilter">
<option value="all">All Years</option>
</select>

<select id="aiFilter">
<option value="all">All Students</option>
<option value="1">AI Users Only</option>
<option value="0">Non-AI Users Only</option>
</select>
</div>

<div class="grid">

<div class="card">
<div class="metric-title">AI Adoption Rate</div>
<div id="adoption" class="metric-value">0</div>
</div>

<div class="card">
<div class="metric-title">CGPA Difference</div>
<div id="cgpaDiff" class="metric-value">0</div>
</div>

<div class="card">
<div class="metric-title">t-Statistic</div>
<div id="tstat" class="metric-value">0</div>
</div>

<div class="card">
<div class="metric-title">p-Value</div>
<div id="pvalue" class="metric-value">0</div>
</div>

</div>

<canvas id="regressionChart"></canvas>

<div id="summary" class="summary"></div>

</div>

<script>

let fullData;

function animateValue(id, end){
let start=0;
let duration=800;
let stepTime=Math.abs(Math.floor(duration/end));
let obj=document.getElementById(id);
let timer=setInterval(()=>{
start+=end/30;
if(start>=end){
start=end;
clearInterval(timer);
}
obj.innerText=parseFloat(start).toFixed(2);
},30);
}

function applyFilters(){
let field=document.getElementById("fieldFilter").value;
let year=document.getElementById("yearFilter").value;
let ai=document.getElementById("aiFilter").value;

let data=fullData;

if(field!="all") data=data.filter(d=>d.Field==field);
if(year!="all") data=data.filter(d=>d.Year==year);
if(ai!="all") data=data.filter(d=>d.UsesAI==ai);

analyze(data);
}

function analyze(data){

let ai=data.filter(d=>d.UsesAI==1);
let non=data.filter(d=>d.UsesAI==0);

if(ai.length==0||non.length==0)return;

let adoption=(ai.length/data.length*100);

animateValue("adoption",adoption);

let meanAI=ai.reduce((a,d)=>a+parseFloat(d.CGPA),0)/ai.length;
let meanNon=non.reduce((a,d)=>a+parseFloat(d.CGPA),0)/non.length;
let diff=meanAI-meanNon;

animateValue("cgpaDiff",diff);

let varAI=ai.reduce((a,d)=>a+(d.CGPA-meanAI)**2,0)/(ai.length-1);
let varNon=non.reduce((a,d)=>a+(d.CGPA-meanNon)**2,0)/(non.length-1);

let t=(diff)/Math.sqrt((varAI/ai.length)+(varNon/non.length));
animateValue("tstat",t);

let p=Math.exp(-0.717*Math.abs(t)-0.416*t*t); // approx
animateValue("pvalue",p);

drawRegression(ai);

document.getElementById("summary").innerHTML=
"<b>Hypothesis Testing:</b><br>"+
"H0: No difference in CGPA between AI and Non-AI users.<br>"+
"H1: Significant difference exists.<br><br>"+
"t-statistic = "+t.toFixed(2)+" | p-value = "+p.toFixed(4)+"<br><br>"+
(p<0.05?"Result: Reject H0 (Significant Difference Detected).":
"Result: Fail to Reject H0 (No Significant Evidence).");

}

function drawRegression(ai){

let x=ai.map(d=>parseFloat(d.AIHours));
let y=ai.map(d=>parseFloat(d.CGPA));

let n=x.length;
let avgX=x.reduce((a,b)=>a+b)/n;
let avgY=y.reduce((a,b)=>a+b)/n;

let slope=(x.reduce((sum,xi,i)=>sum+(xi-avgX)*(y[i]-avgY),0))/
(x.reduce((sum,xi)=>sum+(xi-avgX)**2,0));

let intercept=avgY-slope*avgX;

let regLine=x.map(xi=>slope*xi+intercept);

new Chart(document.getElementById("regressionChart"),{
type:'scatter',
data:{
datasets:[
{
label:'Students',
data:x.map((xi,i)=>({x:xi,y:y[i]})),
backgroundColor:'#fff'
},
{
label:'Regression Line',
data:x.map((xi,i)=>({x:xi,y:regLine[i]})),
type:'line',
borderColor:'#aaa',
fill:false
}
]
},
options:{
plugins:{legend:{labels:{color:"#fff"}}},
scales:{
x:{title:{display:true,text:"AI Hours",color:"#fff"},ticks:{color:"#aaa"}},
y:{title:{display:true,text:"CGPA",color:"#fff"},ticks:{color:"#aaa"}}
}
}
});
}

Papa.parse("AI_Study_Research_Data_250.csv",{
download:true,
header:true,
complete:function(res){
fullData=res.data.filter(r=>r.CGPA);

let fields=[...new Set(fullData.map(d=>d.Field))];
let years=[...new Set(fullData.map(d=>d.Year))];

fields.forEach(f=>{
let opt=document.createElement("option");
opt.value=f;
opt.text="Field "+f;
document.getElementById("fieldFilter").appendChild(opt);
});

years.forEach(y=>{
let opt=document.createElement("option");
opt.value=y;
opt.text="Year "+y;
document.getElementById("yearFilter").appendChild(opt);
});

applyFilters();
}
});

document.getElementById("fieldFilter").onchange=applyFilters;
document.getElementById("yearFilter").onchange=applyFilters;
document.getElementById("aiFilter").onchange=applyFilters;

</script>

</body>
</html>
